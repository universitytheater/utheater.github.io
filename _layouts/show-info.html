---
layout: default
---

<article class="post">
  <header style="text-align: center" class="post-header">
    
    {%comment%} This section displays title and subtitle {%endcomment%}
    <h1 class="post-title">
      {{ page.title | escape }}
      {% if page.slug contains "new-work-week" or page.slug contains "taps-ba-projects" %}
        {{ page.year }}
      {% elsif page.slug contains "weekend-workshops" %}
        ({{ page.quarter | capitalize }} {{ page.year }})
      {% elsif page.slug contains "staged-readings" %}
        ({{ page.quarter | capitalize }} {{ page.year }})
      {% endif %}
    </h1>
    <h5 class="mt-2 mb-2">{{ page.subheader | newline_to_br }}</h5>
    
    {%comment%} This section displays location and week {%endcomment%}
    <h5 class="week-and-location">
      {% if page.location %}
        {% if page.location_link %}
          <a href="{{ page.location_link }}">{{ page.location }}</a>
        {% else %}
          {{ page.location }}
        {% endif %}
      {% endif %}
      {% if page.week %}
        | Week {{ page.week }}
      {% endif %}
    </h5>
  </header>

  <div class="post-content">
    {%comment%} This section handles setup for displaying the banner and show images {%endcomment%}
    {% capture image_prefix %}assets/images/{{page.year}}/{{page.slug}}/slide{% endcapture %}
    {% capture banner_path_pattern %}assets/images/{{page.year}}/{{page.slug}}/banner{% endcapture %}
    {% assign has_show_images = false %}
    {% assign banner_path = "" %}
    {% for image in site.static_files %}
      {% if image.path contains image_prefix %}
        {% assign has_show_images = true %}
        {% break %}
      {% endif %}
    {% endfor %}
    {% for image in site.static_files %}
      {% if image.path contains banner_path_pattern %}
        {% assign banner_path = image.path %}
        {% break %}
      {% endif %}
    {% endfor %}
    
    {%comment%} This section handles the case where there is a banner but no show images {%endcomment%}
    {% if has_show_images == false and banner_path != "" %}
      <div class="text-center">
        <img src="{{ banner_path }}" class="img-fluid show-banner"></img>
      </div>
    {%comment%} This section handles the case where there are show images.
                It makes a bootstrap carousel of all images and the banner, if it exists {%endcomment%}
    {% elsif has_show_images == true %}
      <div id="show-gallery" class="carousel slide" data-ride="carousel" style="height: 30%;">
        <div class="carousel-inner" style="min-width: 100%; width: 100%; height: 100%">
          {% if banner_path != "" %}
            <div class="carousel-item active text-center" style="width: 100%;height: 100%;">
              <img src="{{banner_path}}" style="max-width: 78%; max-height: 30rem;" class="center-block" alt="...">
            </div>
          {% endif %}

          {% for image in site.static_files %}
            {% if image.path contains image_prefix %}
            <div class="carousel-item text-center" style="width: 100%;height: 20%;">
              <img src="{{image.path}}" class="center-block" style="max-width: 78%; max-height: 30rem;" alt="...">
            </div>
            {% endif %}
          {% endfor %}
        </div>

        <a class="carousel-control-prev" href="#show-gallery" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#show-gallery" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    {% endif %}
    
    {%comment%} This section displays show description {%endcomment%}
    {% for para in page.description %}
      <p class="mt-3">{{ para  | markdownify | remove: '<p>' | remove: '</p>'}}</p>
    {% endfor %}

    {%comment%} This section displays ticket link {%endcomment%}
    {% if page.tickets_link %}
      <p class="mt-3"><strong>Buy tickets <a href="{{ page.tickets_link }}">at this link</a>!</strong></p>
    {% endif %}

    {%comment%} This is a legacy feature from when we used to include TAPS pro-shows in the UT show list. {%endcomment%}
    {% if page.is_taps %}
      <p class="mt-3"><em>{{page.title | escape }}</em> is a TAPS-sponsored production and is not affiliated with University Theater.</p>
    {% endif %}

    {%comment%} This section displays archival recording from Neel McNeill's Vimeo {%endcomment%}
    {% if page.vimeo_link %}
      <script src="https://player.vimeo.com/api/player.js"></script>
      <div class="video-player-wrapper">
        <iframe src="{{ page.vimeo_link }}" class="video-player" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
      </div>
    {% endif %}
    
    {%comment%} This conditional allows for multpiple shows to be on one page, designed for use in Weekend of Workshops pages.
                It effectively duplicates the majority of the functionality from a regular page. 
                See the corresponding section for commented code {%endcomment%}
    {% if page.workshops %}
      {% for workshop in page.workshops %}
        <h4 class="mt-2 mb-2">{{ workshop.title | markdownify | remove: '<p>' | remove: '</p>'}}</h4>
        <h5 class="mt-2 mb-2">{{ workshop.subheader | newline_to_br }}</h5>
        <p>{{workshop.description}}</p>
        {% if workshop.vimeo_link %}
          <script src="https://player.vimeo.com/api/player.js"></script>
          <div class="video-player-wrapper">
            <iframe src="{{ workshop.vimeo_link }}" class="video-player" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
          </div>
        {% endif %}
        
        {% for group in workshop.roles %}
        
          <h4 class="mt-2 mb-2"><strong>{{group[0] | markdownify | remove: '<p>' | remove: '</p>'}}</strong></h4>
          
          {% if group[1].bio_file != nil and group[1].bio_file != "" %}
            {% capture year %}{{page.year}}{% endcapture %}
            {% capture file %}{{group[1].bio_file}}{% endcapture %}
            {% assign bio_list = site.data.show-bios[year][page.slug][file] %}
          {% else %}
            {% assign bio_list = group[1] %}
          {% endif %}
          
          {% for person in bio_list %}
            <p style="margin-left:1rem"><strong>{{person.name | markdownify | remove: '<p>' | remove: '</p>'}}
            {% if person.role %}
              ({{person.role}})</strong>
            {% endif %}
            {% if person.bio %}
              {{person.bio | markdownify | remove: '<p>' | remove: '</p>'}}
            {% endif %}
          {% endfor %}

        {% endfor %}
        
      {% endfor %}
    {% endif %}

    {%comment%} This section displays roles and bios {%endcomment%}
    {% if page.roles %}
      {%comment%} This section loops through each subcategory of the credits (cast, crew, band, etc.) {%endcomment%}
      {% for group in page.roles %}
        
        <h4 class="mt-2 mb-2"><strong>{{group[0] | markdownify | remove: '<p>' | remove: '</p>'}}</strong></h4>
        
        {%comment%} This conditional ensures that both the old and new formats for show bios still work.
         The old format is to have the bios in yaml format directly in the show info markdown file. This was a pain in the ass to update.
         The new format is to have the bios in csv format in _data.show-bios/year/slug/.
         If there is a link to a file in _data, it loads that data into bio_list, otherwise it loads the yaml data into bio_list. {%endcomment%}
        {% if group[1].bio_file != nil and group[1].bio_file != "" %}
          {% capture year %}{{page.year}}{% endcapture %}
          {% capture file %}{{group[1].bio_file}}{% endcapture %}
          {% assign bio_list = site.data.show-bios[year][page.slug][file] %}
        {% else %}
          {% assign bio_list = group[1] %}
        {% endif %}
        
        {%comment%} This section loops through each person in the group, displaying their name, role, and bio. {%endcomment%}
        {% for person in bio_list %}
          <p><strong>{{person.name | markdownify | remove: '<p>' | remove: '</p>'}}
          {% if person.role %}
            ({{person.role}})</strong>
          {% endif %}
          {% if person.bio %}
            {{person.bio | markdownify | remove: '<p>' | remove: '</p>'}}
          {% endif %}
          </p>
        {% endfor %}

      {% endfor %}
    {% endif %}
  
    {%comment%} This line inserts adds any content that is outside of the front matter of the show file
                (anything in markdown formatting) {%endcomment%}
    {{content}}
  </div>
</article>
